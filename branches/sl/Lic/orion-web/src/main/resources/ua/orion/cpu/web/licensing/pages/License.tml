<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<t:ori.layout title="${label:entity.License} ${tostring:license}"
              menudata="Start>Licensing>License"
              xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd"
              xmlns:p="tapestry:parameter">
    <t:ori.crud t:id="crud" t:objectClass="LicenseRecordClass" t:source="source" t:listPage="licensing/licenses">
        <p:editBlock>
            <t:ori.beaneditformext t:id="editForm" object="crud.object" model="beanModel"
                                   zone="${crud.listZoneId}" submitLabel="message:action.edit" 
                                   buttons="crud.hideWindowButtonBlock">
                <p:license>
                    <label>${label:property.LicenseRecord.license}</label>
                    <span>${tostring:licenseRecord.license}</span>
                </p:license>
                <p:educationalQualificationLevel>
                    <t:label for="levelSelect"/>
                    <t:select t:id="levelSelect" 
                              label="${label:property.LicenseRecord.educationalQualificationLevel}"
                              value="LicenseRecord.educationalQualificationLevel"
                              model="prop:tapestryComponentDataSource.getSelectModel(LicenseRecord, 'educationalQualificationLevel')" 
                              clientId="'educationalQualificationLevel'"
                              encoder="prop:valueEncoderSource.getValueEncoder(entityService.getMetaEntity('EducationalQualificationLevel').entityClass)" 
                              zone="specialityZone"/>
                </p:educationalQualificationLevel>validate="prop:editContext.getValidator(levelSelect)"

                <p:knowledgeArea>
                    <t:label for="knowledgeAreaSelect"/>
                    <t:select t:id="knowledgeAreaSelect" 
                              label="${label:entity.KnowledgeArea}"
                              value="knowledgeArea"
                              model="prop:knowledgeAreas" 
                              clientId="'knowledgeArea'"
                              encoder="prop:valueEncoderSource.getValueEncoder(entityService.getMetaEntity('KnowledgeArea').entityClass)" 
                              zone="specialityZone"/>
                </p:knowledgeArea>validate="prop:editContext.getValidator(knowledgeAreaSelect)"

                <p:trainingDirection>
                    <t:label for="trainingDirectionSelect"/>
                    <t:zone t:id="trainingDirectionZone" id="trainingDirectionZone">
                        <t:if test="isEditTrainingDirection">
                            <t:select t:id="trainingDirectionSelect" 
                                      label="${label:property.LicenseRecord.trainingDirection}"
                                      value="LicenseRecord.trainingDirection"
                                      model="prop:tapestryComponentDataSource.getSelectModel(LicenseRecord, 'trainingDirection')" 
                                      clientId="'trainingDirection'"
                                      encoder="prop:valueEncoderSource.getValueEncoder(entityService.getMetaEntity('trainingDirection').entityClass)" 
                                      zone="specialityZone"/>
                            <p:else>
                                <input type="text" disabled="true" value="${tostring:licenseRecord.trainingDirection}"/>
                            </p:else>
                        </t:if>
                    </t:zone>
                </p:trainingDirection>validate="prop:editContext.getValidator(specialitySelect)"

                <p:speciality>
                    <t:zone t:id="specialityZone" id="specialityZone">
                        <t:label for="specialitySelect"/>
                        <t:if test="isEditSpeciality">
                            <t:select t:id="specialitySelect" 
                                      label="${label:property.LicenseRecord.speciality}"
                                      value="LicenseRecord.speciality"
                                      model="prop:tapestryComponentDataSource.getSelectModel(LicenseRecord, 'speciality')" 
                                      clientId="'speciality'"
                                      encoder="prop:valueEncoderSource.getValueEncoder(entityService.getMetaEntity('Speciality').entityClass)" 
                                      zone="trainingDirectionZone"/>
                            <p:else>
                                <input type="text" disabled="true" value="-"/>
                            </p:else>
                        </t:if>
                    </t:zone>
                </p:speciality>validate="prop:editContext.getValidator(specialitySelect)"
            </t:ori.beaneditformext>
        </p:editBlock>
    </t:ori.crud>
</t:ori.layout>
