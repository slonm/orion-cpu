= Введение =

Orion CPU это корпоративная информационная система Классического Приватного Университета в Запорожье (Украина). Система написана в виде Java сервлета и имеет веб-интерфейс. Базируется на IOC контейнере Tapestry 5. Для взаимодействия с базой данных используется JPA (Hibernate Entity Manager). Для интеграции JPA с Tapestry 5 использована библиотека проекта Tynamo tapestry-jpa. Веб-интерфейс реализуется средствами Tapestry 5. Для построения отчетов применен Birt report. Система безопасности построена на Apache Shiro. Благодаря модульности IOC контейнера проект разбит на несколько библиотек. В самостоятельные библиотеки выделено ядро, ядро веб-интерфейса, модели данных, элементы интерфейса, ориентированные на модели данных, система безопасности, некоторые сложные компоненты tapestry общего назначения.
В отличии от идеологии Java EE, где все конфигурации вынесены в xml файлы, тут все конфигурируется в IOC модулях Tapestry 5. Идеологически сделана попытка отделить библиотеки организации модели данных и бизнес логики от библиотек пользовательского интерфейса аналогично тому как разделены библиотеки IOC и ядра Tapestry 5.

= Описание библиотек =

==orion-core==
Корневой пакет *ua.orion.core*
Библиотека ядра организации модели данных, доступа к хранимым данным, разграничения доступа к данным, дополнительных метаданных (таких как локализованных подписей сущностей и свойств). Реализует плагинную шину в духе Tapestry 5.

==tapestry-jpa-core-hibernate-entitymanager==
Корневой пакет *org.tynamo.jpa*
Дополнение для библиотеки tapestry-jpa. tapestry-jpa использует EclipseLink, который нужно конфигурировать через persistence.xml файл, а это нарушает общую идеологию конфигурирования проекта. Эта библиотека отключает зависимость от EclipseLink и вместо стандартного JPA способа создания EntityManager использует средства проекта HibernateEntityManager (EJB3Configuration), которые позволяют все сконфигурировать из java кода.

==orion-web==
Корневой пакет *ua.orion.web*
Библиотека ядра веб интерфейса на Tapestry 5. Предоставляет основные страницы проекта (Index, базовый CRUD для сущностей и пр.), компоненты общего назначения и DataAware, а так же сервисы с источниками моделей данных и самих данных на базе данных и метаданных предоставляемых orion-core.

==tapestry-security-core и tapestry-security-web==
Корневой пакет *org.tynamo.security*
Библиотеки интеграции системы безопасности Apache Shiro с tapestry. За основу взята библиотека tapestry-security проекта Tynamo. Недостаток tapestry-security в том, что она предлагает только веб реализацию SecurityManager, а это противоречит идее отделения интерфейса пользователя от модели данных и бизнес логики. tapestry-security-core позволяет сконфигурировать Shiro без указания конкретного SecurityManager, и используется orion-core, а tapestry-security-web включает поддержку WebSecurityManager для orion-web

==orion-menu==
Корневой пакет *ua.orion.tapestry.menu*
Компоненты меню и навигационного меню (главного меню) системы.

==orion-meta и parent==
orion-meta это метапроект для сборки всех остальных проектов. parent это родительский проект для всех проектов для централизованного управления версиями зависимостей, репозитариями и плагинами maven. Проекты разделены на два для облегчения изменения зависимостей.

==cpu==
Собирающий все остальные проекты сервлет. Содержит только минимальную кофигурацию для возможности запуска фильтра Tapestry 5. Собственно конфигурирование делается с помощью включения или исключения зависимостей от других библиотек.

==Библиотеки модели данных и бизнес логики подсистем==
Корневой пакет *ua.orion.cpu.core.<подсистема>*
Эти бибиотеки содержат конкретную модель данных, дополнительные метаданные и бизнес логику подсистемы <подсистема>. Примером может быть задача планирования учебного процесса, учета персонала и т.п.

==Библиотеки веб интерфейса пользователя подсистем==
Корневой пакет *ua.orion.cpu.web.<подсистема>*
Эти библиотеки содержат инструкции для построения главного меню, компоненты и страницы специфичные для данной подсистемы, а также кастомизаторы источников данных специфичные для конкретной модели.
